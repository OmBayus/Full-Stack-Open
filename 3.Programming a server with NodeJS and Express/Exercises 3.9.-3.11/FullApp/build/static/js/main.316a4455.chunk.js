(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{20:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(1),a=t(15),r=t.n(a),i=(t(20),t(6)),u=t(3),o=t(4),s=t.n(o),l="/api/persons",d=function(){return s.a.get(l).then((function(e){return e.data}))},b=function(e){return s.a.post(l,e).then((function(e){return e.data}))},j=function(e,n){return s.a.put("".concat(l,"/").concat(e),n).then((function(e){return e.data}))},f=function(e){return s.a.delete("".concat(l,"/").concat(e))},h=t(0),m=function(e){var n=e.onChange,t=e.value;return Object(h.jsxs)("div",{children:["filter shown with ",Object(h.jsx)("input",{onChange:n,value:t})]})},O=function(e){var n=e.onClick,t=e.onNameChange,c=e.NameValue,a=e.onNumberChange,r=e.NumberValue;return Object(h.jsxs)("form",{children:[Object(h.jsxs)("div",{children:["name: ",Object(h.jsx)("input",{onChange:t,value:c})]}),Object(h.jsxs)("div",{children:["number: ",Object(h.jsx)("input",{onChange:a,value:r})]}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"submit",onClick:n,children:"add"})})]})},v=function(e){var n=e.persons,t=e.newFilter,c=e.deleteClick;return Object(h.jsx)("div",{children:n.map((function(e){if(e.name.includes(t))return Object(h.jsxs)("div",{children:[e.name," ",e.number," ",Object(h.jsx)("button",{onClick:c,name:e.id,children:"delete"})]},e.id)}))})},p=function(e){var n=e.message,t=e.style;return null===n?null:Object(h.jsx)("div",{className:"error",style:{color:t},children:n})},g=function(){var e=Object(c.useState)([]),n=Object(u.a)(e,2),t=n[0],a=n[1],r=Object(c.useState)(""),o=Object(u.a)(r,2),s=o[0],l=o[1],g=Object(c.useState)(""),x=Object(u.a)(g,2),C=x[0],k=x[1],w=Object(c.useState)(""),N=Object(u.a)(w,2),y=N[0],S=N[1],I=Object(c.useState)("some error happened..."),V=Object(u.a)(I,2),T=V[0],A=V[1],D=Object(c.useState)("black"),E=Object(u.a)(D,2),F=E[0],J=E[1];Object(c.useEffect)((function(){d().then((function(e){a(e)}))}),[]);return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Phonebook"}),Object(h.jsx)(p,{message:T,style:F}),Object(h.jsx)(m,{onChange:function(e){S(e.target.value)},value:y}),Object(h.jsx)("h3",{children:"Add a new"}),Object(h.jsx)(O,{onClick:function(e){e.preventDefault();var n=t.filter((function(e){return e.name==s}));if(n.length>=1){window.confirm("".concat(n[0].name," is already added to phonebook, replace the old number with a new one?"))&&j(n[0].id,Object(i.a)(Object(i.a)({},n[0]),{},{number:C})).then((function(e){a(t.map((function(t){return t.id!==n[0].id?t:e}))),A("Changed "+e.name+"'s number"),J("green"),setTimeout((function(){J("black")}),5e3)})).catch((function(e){A("Information of "+n[0].name+" has already been removed from server"),J("red"),d().then((function(e){a(e)})),setTimeout((function(){J("black")}),5e3)}))}else{var c={id:t.length+1,name:s,number:C};b(c).then((function(e){a(t.concat(e)),A("Added "+e.name),J("green"),setTimeout((function(){J("black")}),5e3)}))}l(""),k("")},onNameChange:function(e){l(e.target.value)},NameValue:s,onNumberChange:function(e){k(e.target.value)},NumberValue:C}),Object(h.jsx)("h2",{children:"Numbers"}),Object(h.jsx)(v,{persons:t,newFilter:y,deleteClick:function(e){var n=t.find((function(n){return parseInt(n.id)===parseInt(e.target.name)}));window.confirm("Delete ".concat(n.name," ?"))&&f(n.id).then((function(){var e=t.filter((function(e){return e.id!==n.id}));a(e)}))}})]})};r.a.render(Object(h.jsx)(g,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.316a4455.chunk.js.map